---
description: SWR ë°ì´í„° í˜ì¹­, React Data Grid í…Œì´ë¸” êµ¬í˜„, PapaParse CSV íŒŒì¼ ì²˜ë¦¬, API í˜¸ì¶œ ë° ì‘ë‹µ ì²˜ë¦¬, ë°ì´í„° ìƒíƒœ ê´€ë¦¬, ì»¤ìŠ¤í…€ í›… ê°œë°œ, ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„, ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œë”© ìƒíƒœ ê´€ë¦¬ ì‘ì—…ì— ë„ì›€ì´ ë˜ëŠ” ë£°ì…ë‹ˆë‹¤.
alwaysApply: false
---
# API ë° ë°ì´í„° ê´€ë¦¬ ê°€ì´ë“œ

## ğŸŒ Axios HTTP í´ë¼ì´ì–¸íŠ¸

### ê¸°ë³¸ ì„¤ì •
```typescript
import axios, { AxiosResponse } from 'axios'

// ê¸°ë³¸ axios ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
const apiClient = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL || '/api',
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
})

// ìš”ì²­ ì¸í„°ì…‰í„° (í† í° ì¶”ê°€)
apiClient.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('authToken')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  (error) => Promise.reject(error)
)

// ì‘ë‹µ ì¸í„°ì…‰í„° (ì—ëŸ¬ ì²˜ë¦¬)
apiClient.interceptors.response.use(
  (response: AxiosResponse) => response,
  (error) => {
    if (error.response?.status === 401) {
      // í† í° ë§Œë£Œ ì²˜ë¦¬
      localStorage.removeItem('authToken')
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)
```

### API ì„œë¹„ìŠ¤ íŒ¨í„´
```typescript
interface User {
  id: string
  name: string
  email: string
}

interface CreateUserRequest {
  name: string
  email: string
}

class UserService {
  private static endpoint = '/users'

  static async getUsers(): Promise<User[]> {
    const response = await apiClient.get<User[]>(this.endpoint)
    return response.data
  }

  static async getUser(id: string): Promise<User> {
    const response = await apiClient.get<User>(`${this.endpoint}/${id}`)
    return response.data
  }

  static async createUser(data: CreateUserRequest): Promise<User> {
    const response = await apiClient.post<User>(this.endpoint, data)
    return response.data
  }

  static async updateUser(id: string, data: Partial<User>): Promise<User> {
    const response = await apiClient.put<User>(`${this.endpoint}/${id}`, data)
    return response.data
  }

  static async deleteUser(id: string): Promise<void> {
    await apiClient.delete(`${this.endpoint}/${id}`)
  }
}
```

### SWRê³¼ Axios í†µí•©
```typescript
import useSWR from 'swr'

// Axios fetcher í•¨ìˆ˜
const axiosFetcher = (url: string) => apiClient.get(url).then(res => res.data)

function useUsers() {
  const { data, error, isLoading, mutate } = useSWR('/users', axiosFetcher)

  return {
    users: data,
    isLoading,
    isError: error,
    mutate,
  }
}

// ì—ëŸ¬ ì²˜ë¦¬ê°€ í¬í•¨ëœ ì»¤ìŠ¤í…€ í›…
function useUserWithErrorHandling(id: string) {
  const { data, error, isLoading } = useSWR(
    id ? `/users/${id}` : null,
    axiosFetcher,
    {
      onError: (error) => {
        console.error('ì‚¬ìš©ì ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error)
        toast.error('ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤')
      }
    }
  )

  return { user: data, error, isLoading }
}
```

## ğŸ” Next-Auth ì¸ì¦ ê´€ë¦¬

### ê¸°ë³¸ ì„¤ì • (pages/api/auth/[...nextauth].ts)
```typescript
import NextAuth from 'next-auth'
import GithubProvider from 'next-auth/providers/github'
import CredentialsProvider from 'next-auth/providers/credentials'

export default NextAuth({
  providers: [
    GithubProvider({
      clientId: process.env.GITHUB_CLIENT_ID!,
      clientSecret: process.env.GITHUB_CLIENT_SECRET!,
    }),
    CredentialsProvider({
      name: 'credentials',
      credentials: {
        email: { label: 'ì´ë©”ì¼', type: 'email' },
        password: { label: 'ë¹„ë°€ë²ˆí˜¸', type: 'password' }
      },
      async authorize(credentials) {
        // ì‚¬ìš©ì ì¸ì¦ ë¡œì§
        const user = await authenticateUser(credentials)
        return user || null
      }
    })
  ],
  callbacks: {
    async jwt({ token, user }) {
      if (user) {
        token.userId = user.id
      }
      return token
    },
    async session({ session, token }) {
      if (token) {
        session.user.id = token.userId
      }
      return session
    }
  },
  pages: {
    signIn: '/auth/signin',
    error: '/auth/error',
  },
  session: {
    strategy: 'jwt',
  },
})
```

### í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì¸ì¦ í›…
```typescript
import { useSession, signIn, signOut } from 'next-auth/react'

function useAuth() {
  const { data: session, status } = useSession()

  const login = async (email: string, password: string) => {
    const result = await signIn('credentials', {
      email,
      password,
      redirect: false,
    })
    
    if (result?.error) {
      toast.error('ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤')
    }
    
    return result
  }

  const logout = async () => {
    await signOut({ redirect: false })
    toast.success('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤')
  }

  return {
    user: session?.user,
    isLoading: status === 'loading',
    isAuthenticated: status === 'authenticated',
    login,
    logout,
  }
}
```

### ë³´í˜¸ëœ ë¼ìš°íŠ¸ ì»´í¬ë„ŒíŠ¸
```typescript
import { useSession } from 'next-auth/react'
import { useRouter } from 'next/router'
import { useEffect } from 'react'

function ProtectedRoute({ children }: { children: React.ReactNode }) {
  const { data: session, status } = useSession()
  const router = useRouter()

  useEffect(() => {
    if (status === 'loading') return // ë¡œë”© ì¤‘

    if (!session) {
      router.push('/auth/signin')
      return
    }
  }, [session, status, router])

  if (status === 'loading') {
    return <div>ë¡œë”© ì¤‘...</div>
  }

  if (!session) {
    return null
  }

  return <>{children}</>
}
```

## ğŸ›¡ï¸ Zod ìŠ¤í‚¤ë§ˆ ê²€ì¦

### ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ ì •ì˜
```typescript
import { z } from 'zod'

// ì‚¬ìš©ì ìŠ¤í‚¤ë§ˆ
const UserSchema = z.object({
  id: z.string(),
  name: z.string().min(1, 'ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤'),
  email: z.string().email('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”'),
  age: z.number().min(0, 'ë‚˜ì´ëŠ” 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤').optional(),
  role: z.enum(['user', 'admin']).default('user'),
})

// íƒ€ì… ì¶”ì¶œ
type User = z.infer<typeof UserSchema>

// ìƒì„± ìš”ì²­ ìŠ¤í‚¤ë§ˆ
const CreateUserSchema = UserSchema.omit({ id: true })
type CreateUserRequest = z.infer<typeof CreateUserSchema>
```

### API ìš”ì²­/ì‘ë‹µ ê²€ì¦
```typescript
// API í•¸ë“¤ëŸ¬ì—ì„œ ê²€ì¦
export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  if (req.method === 'POST') {
    try {
      const validatedData = CreateUserSchema.parse(req.body)
      
      // ê²€ì¦ëœ ë°ì´í„°ë¡œ ì‚¬ìš©ì ìƒì„±
      const newUser = await createUser(validatedData)
      
      res.status(201).json(newUser)
    } catch (error) {
      if (error instanceof z.ZodError) {
        res.status(400).json({ 
          error: 'ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„°', 
          details: error.errors 
        })
      } else {
        res.status(500).json({ error: 'ì„œë²„ ì˜¤ë¥˜' })
      }
    }
  }
}
```

### í¼ ê²€ì¦ í†µí•©
```typescript
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'

const LoginSchema = z.object({
  email: z.string().email('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”'),
  password: z.string().min(8, 'ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤'),
})

type LoginForm = z.infer<typeof LoginSchema>

function LoginForm() {
  const { 
    register, 
    handleSubmit, 
    formState: { errors } 
  } = useForm<LoginForm>({
    resolver: zodResolver(LoginSchema)
  })

  const onSubmit = (data: LoginForm) => {
    // ê²€ì¦ëœ ë°ì´í„° ì²˜ë¦¬
    console.log(data)
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input
        {...register('email')}
        placeholder="ì´ë©”ì¼"
        className={errors.email ? 'border-red-500' : ''}
      />
      {errors.email && <span className="text-red-500">{errors.email.message}</span>}
      
      <input
        {...register('password')}
        type="password"
        placeholder="ë¹„ë°€ë²ˆí˜¸"
        className={errors.password ? 'border-red-500' : ''}
      />
      {errors.password && <span className="text-red-500">{errors.password.message}</span>}
      
      <button type="submit">ë¡œê·¸ì¸</button>
    </form>
  )
}
```

### í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
```typescript
// lib/env.ts
const envSchema = z.object({
  NEXT_PUBLIC_API_URL: z.string().url(),
  GITHUB_CLIENT_ID: z.string(),
  GITHUB_CLIENT_SECRET: z.string(),
  NEXTAUTH_SECRET: z.string(),
  NEXTAUTH_URL: z.string().url(),
})

export const env = envSchema.parse(process.env)
```

## ğŸ”„ SWR ë°ì´í„° í˜ì¹­

### ê¸°ë³¸ ì‚¬ìš©ë²•
```typescript
import useSWR from 'swr'

const fetcher = (url: string) => fetch(url).then(res => res.json())

function Profile() {
  const { data, error, isLoading } = useSWR('/api/user', fetcher)

  if (error) return <div>ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</div>
  if (isLoading) return <div>ë¡œë”© ì¤‘...</div>
  
  return <div>ì•ˆë…•í•˜ì„¸ìš” {data.name}!</div>
}
```

### ì»¤ìŠ¤í…€ í›… íŒ¨í„´
```typescript
function useUser(id: string) {
  const { data, error, isLoading, mutate } = useSWR(
    id ? `/api/user/${id}` : null,
    fetcher,
    {
      revalidateOnFocus: false,
      revalidateOnReconnect: true,
    }
  )

  return {
    user: data,
    isLoading,
    isError: error,
    mutate,
  }
}
```

### ì—ëŸ¬ ì²˜ë¦¬
```typescript
const { data, error } = useSWR('/api/data', fetcher, {
  onError: (error) => {
    console.error('ë°ì´í„° í˜ì¹­ ì—ëŸ¬:', error)
    toast.error('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤')
  },
  onSuccess: (data) => {
    console.log('ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', data)
  }
})
```

## ğŸ“Š React Data Grid

### ê¸°ë³¸ ì„¤ì •
```typescript
import DataGrid from 'react-data-grid'

interface Row {
  id: number
  name: string
  email: string
  createdAt: string
}

const columns = [
  { key: 'name', name: 'ì´ë¦„', sortable: true },
  { key: 'email', name: 'ì´ë©”ì¼', sortable: true },
  { 
    key: 'createdAt', 
    name: 'ìƒì„±ì¼', 
    formatter: ({ row }: { row: Row }) => 
      format(new Date(row.createdAt), 'yyyy-MM-dd')
  },
]

function DataTable() {
  const [rows, setRows] = useState<Row[]>([])

  return (
    <DataGrid
      columns={columns}
      rows={rows}
      defaultColumnOptions={{ sortable: true }}
      className="fill-grid"
    />
  )
}
```

### ì»¤ìŠ¤í…€ ì…€ ë Œë”ëŸ¬
```typescript
function ActionCell({ row }: { row: Row }) {
  const handleEdit = () => {
    // í¸ì§‘ ë¡œì§
  }

  const handleDelete = () => {
    // ì‚­ì œ ë¡œì§
  }

  return (
    <div className="flex gap-2">
      <Button size="sm" variant="outline" onClick={handleEdit}>
        í¸ì§‘
      </Button>
      <Button size="sm" variant="destructive" onClick={handleDelete}>
        ì‚­ì œ
      </Button>
    </div>
  )
}
```

## ğŸ“„ PapaParse CSV ì²˜ë¦¬

### íŒŒì¼ ì—…ë¡œë“œ ë° íŒŒì‹±
```typescript
import Papa from 'papaparse'

const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {
  const file = event.target.files?.[0]
  if (!file) return

  Papa.parse(file, {
    complete: (results) => {
      console.log('íŒŒì‹± ì™„ë£Œ:', results.data)
      setData(results.data)
    },
    header: true,
    skipEmptyLines: true,
    error: (error) => {
      console.error('íŒŒì‹± ì—ëŸ¬:', error)
      toast.error('CSV íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤')
    }
  })
}
```

### CSV ë‹¤ìš´ë¡œë“œ
```typescript
const downloadCSV = (data: any[], filename: string) => {
  const csv = Papa.unparse(data)
  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' })
  const link = document.createElement('a')
  
  if (link.download !== undefined) {
    const url = URL.createObjectURL(blob)
    link.setAttribute('href', url)
    link.setAttribute('download', filename)
    link.style.visibility = 'hidden'
    document.body.appendChild(link)
    link.click()
    document.body.removeChild(link)
  }
}
```

## ğŸ› ï¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

### ë‚ ì§œ ì²˜ë¦¬ (date-fns)
```typescript
import { format, parseISO, isValid } from 'date-fns'
import { ko } from 'date-fns/locale'

export const formatDate = (dateString: string) => {
  const date = parseISO(dateString)
  return isValid(date) ? format(date, 'yyyyë…„ MMì›” ddì¼', { locale: ko }) : 'ì˜ëª»ëœ ë‚ ì§œ'
}
```

### ê³ ìœ  ID ìƒì„± (nanoid)
```typescript
import { nanoid } from 'nanoid'

export const generateId = () => nanoid()
export const generateShortId = () => nanoid(8)
```

### ê¹Šì€ ê°ì²´ ë¹„êµ (fast-deep-equal)
```typescript
import isEqual from 'fast-deep-equal'

const useDeepCompareMemo = <T>(value: T): T => {
  const ref = useRef<T>(value)
  
  if (!isEqual(ref.current, value)) {
    ref.current = value
  }
  
  return ref.current
}
```

## ğŸ¯ ìµœì í™” íŒ¨í„´

### ë””ë°”ìš´ìŠ¤ í›…
```typescript
import { useDebouncedCallback } from 'use-debounce'

const debouncedSave = useDebouncedCallback(
  (value: string) => {
    // ì €ì¥ ë¡œì§
  },
  500
)
```

### ë¬´í•œ ìŠ¤í¬ë¡¤
```typescript
import { useSWRInfinite } from 'swr/infinite'

const getKey = (pageIndex: number, previousPageData: any) => {
  if (previousPageData && !previousPageData.length) return null
  return `/api/data?page=${pageIndex}`
}

const { data, error, size, setSize } = useSWRInfinite(getKey, fetcher)
```